<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Account</title>

<!-- CSS -->
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500">
<link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="assets/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="assets/css/form-elements.css">
<link rel="stylesheet" href="assets/css/style.css">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Favicon and touch icons -->
<link rel="shortcut icon" href="assets/ico/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">

<script src="AmazeUI-2.4.2/assets/js/jquery.min.js"></script>
<!-- <script src="AmazeUI-2.4.2/assets/js/amazeui.js"></script> -->
<script src="AmazeUI-2.4.2/assets/js/amazeui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.9/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>


</head>

<body>

<!-- Top menu -->
<!-- <nav class="navbar navbar-inverse navbar-no-bg" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<label v-model='userInfo.name'>{name}</label>
			<label >{name}</label>
			<h3>{{name}}</h3>
		</div>

	</div>
</nav> -->

<!-- Top content -->
<div class="top-content" id="add">
	<div class="menu-hd" v-show="!userIsLogin" style="float: left; margin-left: 10rem; ">
		<a href="login.html" style="color: aqua;">请登录</a>
	</div>
	<div class="menu-hd" v-show="userIsLogin" style="float: left; margin-left: 10rem; ">
		<span style="color: aqua; margin-right: 5rem;">欢迎，{{userInfo.name}}</span>
		<span style="color: aqua; cursor:pointer;" @click="outLogin">退出登录</span>
	</div>


	<div class="inner-bg">
		<div class="container">
			<div class="row">
				<div class="col-sm-8 col-sm-offset-2 text">
					<h1><strong>记账表单</strong></h1>
					<h3 style="color: aqua; text-decoration:underline; cursor:pointer;" @click="goToQueryAccount"><strong>前往查询</strong></h3>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6 form-box" style="margin-left: 6.5%;">
					
					<div class="registration-form">
						
						<div class="form-top" style="width: 1000px;">
							<div class="form-top-left">
								<p>Start accounting:</p>
							</div>
							<div class="form-top-right">
							</div>
						</div>
						<div class="form-bottom" style="width: 1000px; height: auto;">
							<div class="form-group">
								<label class="sr-only" for="form-first-name">Date</label>
								<input type="date" name="form-first-name" placeholder="Date..." class="form-first-name form-control" v-model='date' id="date">
							</div>
							<div class="form-group">
								<label class="sr-only" for="form-last-name">Amount</label>
								<input type="text" name="form-last-name" placeholder="Amount..." class="form-last-name form-control" v-model='money' id="money">
							</div>
							<!-- <div class="form-group">
								<label class="sr-only" for="form-last-name">Amount</label>
								<input type="text" name="form-last-name" placeholder="Amount..." class="form-last-name form-control" v-model='money' id="money">
							</div> -->
							<div class="form-group">
								<label class="sr-only" for="form-about-yourself">Remark</label>
								<textarea style="height: 200px;" name="form-about-yourself" placeholder="Remark..." 
											class="form-about-yourself form-control" id="remark" v-model='remark'></textarea>
							</div>
							<button type="button" @click="addAccount" class="btn btn-next">Account</button>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>
	</div>
	
</div>
Copyright &copy; 2018.Company name All rights reserved.<a target="_blank" href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a>

<!-- Javascript -->
<script src="assets/js/jquery-1.11.1.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/jquery.backstretch.min.js"></script>
<script src="assets/js/retina-1.1.0.min.js"></script>
<script src="assets/js/scripts.js"></script>

<!--[if lt IE 10]>
	<script src="assets/js/placeholder.js"></script>
<![endif]-->

<script>
	window.jQuery || document.write('<script src="basic/js/jquery-1.9.min.js"><\/script>');
</script>
<script type="text/javascript" src="basic/js/quick_links.js"></script>

<div class="theme-popover-mask"></div>
<script src="components/VuePaging/zpageNav.js"></script>
<script type="text/javascript " src="js/app.js"></script>
<script type="text/javascript">
	var add = new Vue({
		el: "#add",
		data: {
			name:'111',
			type:null,
			date:null,
			money:null,
			remark:null,
			userIsLogin:false,
			userInfo:null,

		},
		created() {
			this.judgeUserLoginStatus();
		},
		methods: {
			addAccount() {
				var serverUrl = app.serverUrl;
				// var userToken = app.getCookie("userToken");
				var AccountBO = {
							date: this.date,
							type: this.type,
							remark: this.remark,
							money:this.money/100,
							creator:this.userInfo.name
						};
				// axios.defaults.withCredentials = true;
				axios.post(
					serverUrl+'/account/addAccount' ,AccountBO,
					{
						headers:{
								'userToken':this.userInfo.userToken
						}
					}
				
				)
					.then(res => {
						if (res.data.status == 200) {
							console.log(res.data.data);
							alert("登记成功!");
							this.type=null;
							this.date=null;
							this.money=null;
							this.remark=null;
						} else {
							alert(res.data.msg);
							console.log(res.data.msg);
						}
					});
			},
			goToQueryAccount() {
					window.location.href = "queryAccount.html";
				},
			// 通过cookie判断用户是否登录
			judgeUserLoginStatus() {
					var userCookie = app.getCookie("userToken");
					if (
						userCookie != null &&
						userCookie != undefined &&
						userCookie != ""
					) {
						var userInfoStr = decodeURIComponent(userCookie);
						// console.log(userInfoStr);
						if (
							userInfoStr != null &&
							userInfoStr != undefined &&
							userInfoStr != ""
						) {
							var userInfo = JSON.parse(userInfoStr);
							// 判断是否是一个对象
							if ( typeof(userInfo)  == "object" ) {
								this.userIsLogin = true;
								// console.log(userInfo);
								this.userInfo = userInfo;
							} else {
								this.userIsLogin = false;
								this.userInfo = {};
							}
						}
					} else {
						this.userIsLogin = false;
						this.userInfo = {};
						alert("请先登录!");
						window.location.href = "login.html";
					}
			},
			outLogin(){
				var serverUrl = app.serverUrl;

				axios.post(
					serverUrl+'/user/outLogin',
				)
					.then(res => {
						if (res.data.status == 200) {
							this.result = res.data.data;
							// console.log(res.data.data);

							alert("退出登录成功!");
							window.location.href = "login.html";

						} else {
							alert(res.data.msg);
							console.log(res.data.msg);
						}
					});

				}

		}
	});

</script>


</body>


</html>